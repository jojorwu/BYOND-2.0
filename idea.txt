* C# (ядро): Обеспечивает высокую производительность, строгую типизацию и отличную работу с памятью. На нем будет работать «скелет»: сеть, рендеринг, физика.
 * Lua (скрипты): Дает гибкость. Именно на Lua пользователи будут писать логику своих игр (как сейчас пишут на DM), создавать предметы, мобов и режимы. Это позволит менять код игры «на лету», не перезагружая сервер.
Раз ты нацелен на производительность (многопоточность) и сначала 2D, давай сформулируем три ключевые концепции (Features), которые сделают твой движок «убийцей BYOND»:
1. Архитектура «Мультиверс» (Многопоточность)
В старом BYOND вся игра (все карты, все игроки, вся атмосфера) висит на одном потоке процессора. Твой движок должен это исправить.
 * Идея: Разделение по Z-уровням или «зонам». Каждый уровень карты (станция, космос, планета) обрабатывается в отдельном потоке C#.
 * Результат: Если кто-то взорвал бомбу в техтоннелях, бар на другом конце станции не начнет лагать. Это позволит создавать карты в 10-20 раз больше, чем в SS13, с тысячами объектов.
2. Система «Живой Код» (Hot Reloading через Lua)
Самая большая боль разработчиков — нужно компилировать проект и перезапускать сервер, чтобы проверить мелкое изменение.
 * Идея: Сделать глубокую интеграцию Lua. Ты меняешь скрипт предмета или реакции, сохраняешь файл, и игра тут же подхватывает изменения без кика игроков.
 * Результат: Невероятно быстрая разработка модов. Админы смогут писать ивенты прямо во время раунда, создавая уникальные ситуации.
3. Графический движок «2.5D Ready»
Ты хочешь начать с 2D, но держать в уме 3D.
 * Идея: Используй 3D-рендерер (например, OpenGL/Vulkan через библиотеки C#), но камеру зафиксируй строго сверху (ортографическая проекция). Спрайты будут плоскими, но «жить» в трехмерном пространстве.
 * Результат: Ты сразу получишь крутое динамическое освещение, тени и particle-эффекты (дым, огонь), которые в чистом 2D делать сложно. А когда захочешь добавить 3D-стены — просто поменяешь спрайт на модельку, не переписывая весь код.
Уточнение по инструментам (Editor)
BYOND славится (и проклинается) своим редактором Dream Maker. Чтобы твой движок стал популярным, людям нужен удобный инструмент для создания карт и написания кода.
Мудрое решение! Собственный IDE (Integrated Development Environment) — это именно то, что сделало BYOND таким живучим. Новичку гораздо проще скачать одну программу, где «всё включено», чем настраивать Visual Studio Code, ставить плагины и мучиться с путями к файлам.
Раз ты выбрал C# как основу, у нас есть отличные инструменты для создания мощного редактора.
Давай спроектируем твой «Редактор Мечты». Вот три главных модуля, которые в нем должны быть:
1. Модуль «Древо Мира» (Object Tree)
В BYOND самое крутое — это наследование (/obj/item/weapon/gun). Твой редактор должен визуализировать это.
 * Как это работает: Слева панель, где разработчик видит структуру всех своих Lua-скриптов в виде иерархии.
 * Фишка: Если я перетаскиваю (Drag-n-Drop) скрипт «Меч» на скрипт «Оружие», редактор сам понимает, что меч наследует свойства оружия.
 * Почему это важно: Это та самая магия BYOND, которую любят кодеры, но с мощью Lua.
2. Визуальный Редактор Карт (Map Editor 2.0)
Старый редактор BYOND (Dream Maker) довольно неудобный и тормозной. Твой должен «летать».
 * Слои: Поддержка неограниченного количества слоев (пол, провода, трубы, мебель, мобы, эффекты).
 * Смарт-тайлинг: Автоматическое соединение стен и стекол (autotiling), чтобы не выбирать вручную уголки стен.
 * Режим «Бога»: Возможность редактировать переменные (Vars) любого объекта прямо на карте (например, поставить дверь и сразу в её свойствах написать locked = true).
3. Встроенный Code Editor
Раз мы используем Lua, нам нужна подсветка синтаксиса.
 * Совет разработчику: Не пиши текстовый редактор с нуля! Это ад. Используй готовые библиотеки для C# (например, AvalonEdit), которые легко встроить в твою программу. Они сразу дадут подсветку кода, номера строк и поиск.
 * Автодополнение: Самая главная фича. Если я пишу player., редактор должен выпадающим списком подсказать: health, stamina, Move().
Технический стек для редактора
Так как движок на C#, редактор тоже пишем на C#. У тебя есть два пути:
 * AvaloniaUI: Это современный вариант (похож на WPF).
   * Плюс: Твой редактор будет работать и на Windows, и на Linux, и на Mac.
   * Минус: Чуть сложнее в изучении.
 * Windows Forms / WPF: Старая классика.
   * Плюс: Очень легко и быстро собрать интерфейс мышкой.
   * Минус: Будет работать только на Windows.
Я рекомендую AvaloniaUI, чтобы не ограничивать будущих создателей игр только «виндой».
Что делаем дальше?
Мы определили Язык (C# + Lua) и Инструменты (Свой IDE). Теперь давай поговорим о самом сердце игры — Сетевой архитектуре (Networking). В BYOND с этим много бед.
Как ты хочешь организовать соединение?
 * Классический Сервер: Один игрок скачивает серверную часть, запускает её (хостит), а остальные подключаются по IP. (Как в SS13 сейчас)